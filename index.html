<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<title>SteamChat</title>
	<meta name="viewport" content="width=device-width, initial-scale=1" />

	<!-- CSS Bootstrap -->
	<link rel="stylesheet" href="css/bootstrap.css">

	<!-- custom scrollbar stylesheet -->
	<link rel="stylesheet" href="css/jquery.mCustomScrollbar.min.css">
	<link rel="stylesheet" href="css/steamchat.css">
	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

	<!-- Google CDN jQuery UI stylesheet -->
	<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.css" />
	<link href="https://fonts.googleapis.com/css?family=Exo" rel="stylesheet">

	<script src="https://unpkg.com/vue"></script>

</head>

<body>
	<div id="app">
		<div class="navbar navbar-default navbar-fixed-top" style="background-color: rgb(75,75,75);">
			<div class="container">
				<div class="navbar-collapse collapse" id="navbar-main">
					<ul class="nav navbar-nav">
						<a class="navbar-brand"><img src="img/favicon.png" width="50" height="50" style="margin-right:20px;">CsOptic</a>
						<li style="margin-top:1px;"><button type="button" style="outline:none;" class="btn btn-default navbar-btn" data-toggle="modal" data-target="#flipModal">New Flip</button></li>
						<li style="margin-top:1px;"><button type="button" style="outline:none;" class="btn btn-default navbar-btn" data-toggle="modal" data-target="#howitworksmodal">How it Works</button></li>
						<li style="margin-top:1px;"><button type="button" style="outline:none;" class="btn btn-default navbar-btn" data-toggle="modal" data-target="#tradeLinkModal">Trade Link</button></li>
					</ul>

					<ul class="nav navbar-nav navbar-right">
						<li v-if=" ! user"><a href="/auth/steam"><img src="https://steamcommunity-a.akamaihd.net/public/images/signinthroughsteam/sits_large_noborder.png" style="margin-right:35px;"></a></li>
						<li v-else><a href="/logout" title="Click to Logout" style="margin-right:55px;"><img id="profilepic" class="img-responsive img-avatar" :src="user.photos[1].value" alt="Avatar"><strong id="username">{{ user.displayName }}</strong></a></li>
					</ul>
				</div>
			</div>
		</div>

		<div>
			<div class="container">
				<div class="row">
					<div class="col-md-8">
						<h1>CsOptic</h1>
						<p>CsOptic.com is set for launch August 1st, 2017. Prepare to go wild.</p>
						<br>
						<table class="table table-striped table-hover">
							<thead>
								<tr>
									<th>Name</th>
									<th>Pot Value</th>
									<th>Skin Count</th>
								</tr>
							</thead>
							<tbody v-if="coinflips">
								<tr v-for="(flip, index) in coinflips">
									<template v-if="flip.joinData">
										<td>
											<img id="profilepic" class="img-responsive img-avatar" :src="flip.flipDetails.pic" alt="Avatar" style="width: 50px;height: 50px">
											{{ flip.flipDetails.name }}
											vs.
											<img id="profilepic" class="img-responsive img-avatar" :src="flip.joinData.flipDetails.pic" alt="Avatar" style="width: 50px;height: 50px">
											{{ flip.joinData.flipDetails.name }}
										</td>
										<td>${{ flip.itemsAndDetails.value + flip.joinData.itemsAndDetails.value }}</td>
										<td>{{ flip.itemsAndDetails.count + flip.joinData.itemsAndDetails.count }}</td>
									</template>
									<template v-else>
										<td>
											<img id="profilepic" class="img-responsive img-avatar" :src="flip.flipDetails.pic" alt="Avatar" style="width: 50px;height: 50px">
											{{ flip.flipDetails.name }}
										</td>
										<td>${{ flip.itemsAndDetails.value }}</td>
										<td>{{ flip.itemsAndDetails.count }}</td>
									</template>

									<td>
										<button class="btn btn-default watchbtn" style="outline:none;margin-left:-55px;margin-right:-50px;" data-toggle="modal" data-target="#watchflipmodal" v-on:click="flipIndexClicked = index">Watch</button>
									</td>
									<td>
										<button class="btn btn-primary" style="width:77px;margin-right:-52px;" data-toggle="modal" data-target="#joinFlipModal" v-on:click="flipIndexClicked = index">Join</button>
									</td>
								</tr>
							</tbody>
							<tbody v-else class="nohover">
								<td colspan="4"><em>No current flips</em></td>
							</tbody>
						</table>
					</div>
					<div class="col-md-4">
						<div id="chatbox" class="content" data-mcs-axis="y" data-mcs-theme="light-2">
							<p v-if=" ! user"><strong>Hello, log in with Steam to use this chat.</strong></p>
							<p v-else><strong>Hello {{ user.displayName }}, welcome to the chat.</strong></p>
						</div>

						<div id="textarea">
							<form id="chatboxsendbutton" action="">
								<input id="m" style="width: 252px; height: 40px;" autocomplete="off" />
								<button class="btn btn-primary" style="height:40px;width:69px;margin-top:-2px;margin-left:-4px">Send</button>
							</form>
						</div> <!--Twitter Shit-->
						<div id="info" style="margin-right:40px;">
							<a class="twitter-timeline" data-width="320" data-height="396" data-chrome="transparent noscrollbar" data-dnt="true" data-theme="dark" href="https://twitter.com/cs_optic">Tweets by CsOptic</a>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div id="flipModal" class="modal fade">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="false">&times;</button>
						<h4 class="modal-title">New Flip</h4>
					</div>
					<div class="modal-body container-fixed">
						<div class="row">
							<div class="col-xs-12">
								<div class="alert alert-info text-center">
									Click the items you want to add to the coinflip.
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-xs-6">
								<div class="well text-center inventorybutton">
									Your inventory
								</div>
								<div class="csgo-items high scrollbar" id="style-3">
									<div v-if=" ! userInventory.error && userInventory.length">
										<div class="csgo-item csgo-item--rare" :class="`csgo-item--${item.item_type.name}`" v-for="item in userInventory" v-if=" ! item.hidden && userInventorySelected.indexOf(item.assetid) === -1 && item.price > rates.ignore"
										 v-on:click="addItem('user', item.assetid, item.price)">
											<div class="csgo-item--title">{{ item.data.market_hash_name }}</div>
											<div class="csgo-item--st" v-if="item.data.market_hash_name.indexOf('StatTrak') !== -1">ST</div>
											<div class="csgo-item--wear" v-if="item.item_wear">{{ item.item_wear }}</div>
											<div class="csgo-item--price">${{ item.price }}</div>
											<div class="csgo-item--bg" :style="`background-image:url(https://steamcommunity-a.akamaihd.net/economy/image/${item.data.image});`"></div>
										</div>
									</div>
									<div v-else-if="userInventory.error">
										<div v-if="userInventory.error.statusCode == 403">
											<div class="alert alert-danger" style="margin:0">
												<strong>Your profile or inventory settings are set to private. We can't acquire the items of your CS:GO inventory.</strong>
												<div><a href="http://steamcommunity.com/id/me/edit/settings" target="_blank">Change your Steam privacy settings here.</a>													After that's done you can <a href="#">try reloading inventories</a>.</div>
											</div>
											<div class="alert alert-warning">
												<strong>If you're certain your privacy settings are public please contact the administrator or try again later.</strong>
												<div>Sometimes Steam has issues with its stability of the inventory servers. Make sure that Steam is not broken
													<a href="http://steamstat.us" target="_blank"><strong>here</strong></a>.</div>
											</div>
										</div>
										<div v-else>
											<div class="alert alert-danger">
												<strong v-if="userInventory.error.error">{{ userInventory.error.error }}</strong>
												<strong v-else>Something went wrong.. please try again!</strong>
												<span v-if="userInventory.error.statusCode">({{ userInventory.error.statusCode }})</span>
											</div>
										</div>
									</div>
									<div v-else-if=" ! user.steamID64">
										<div class="alert alert-info" style="margin-right:30px;">Please authenticate to create a new coinflip.</div>
									</div>
									<div v-else>
										<div class="alert alert-info"><img src="img/load.gif" alt="">Please wait..</div>
									</div>
									<div class="clearfix"></div>
								</div>
							</div>
							<div class="col-xs-6">
								<div div class="well text-center inventorybutton">
									Selected items
								</div>
								<div class="csgo-items high scrollbar" id="style-3">
									<div v-if=" ! userInventory.error && userInventorySelected.length > 0">
										<div class="csgo-item csgo-item--rare" :class="`csgo-item--${item.item_type.name}`" v-for="item in userInventory" v-if="userInventorySelected.indexOf(item.assetid) !== -1"
										 v-on:click="removeItem('user', item.assetid, item.price)">
											<div class="csgo-item--title">{{ item.data.market_hash_name }}</div>
											<div class="csgo-item--st" v-if="item.data.market_hash_name.indexOf('StatTrak') !== -1">ST</div>
											<div class="csgo-item--wear" v-if="item.item_wear">{{ item.item_wear }}</div>
											<div class="csgo-item--price">${{ item.price }}</div>
											<div class="csgo-item--bg" :style="`background-image:url(https://steamcommunity-a.akamaihd.net/economy/image/${item.data.image});`"></div>
										</div>
									</div>
									<div class="clearfix"></div>
								</div>
							</div>
							<div class="modal-footer">
								<span class="price">
								<span class="well well-sm">${{ userInventorySelectedValue.toFixed(2) }}</span>
								</span>
								<button type="button" class="btn btn-primary" style="background-color:rgb(85,85,85);margin-bottom:2px;height:38px;outline:none;" data-dismiss="modal"
								 v-on:click="cancelFlip">Cancel</button>
								<button type="button" class="btn btn-primary" style="margin-bottom:2px;margin-left:-.3px;height:38px;outline:none;" v-on:click="createFlip">Create</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>


		<div id="joinFlipModal" class="modal fade" v-if="coinflips">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="false">&times;</button>
						<h4 class="modal-title">Join Flip</h4>
					</div>
					<div class="modal-body container-fixed">
						<div class="row">
							<div class="col-xs-12">
								<div class="alert alert-info text-center">
									Click the items you want to add to the coinflip.
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-xs-6">
								<div class="well text-center inventorybutton">
									Your inventory
								</div>
								<div class="csgo-items high scrollbar" id="style-3">
									<div v-if=" ! userInventory.error && userInventory.length">
										<div class="csgo-item csgo-item--rare" :class="`csgo-item--${item.item_type.name}`" v-for="item in userInventory" v-if=" ! item.hidden && userInventorySelected.indexOf(item.assetid) === -1 && item.price > rates.ignore"
										 v-on:click="addItem('user', item.assetid, item.price)">
											<div class="csgo-item--title">{{ item.data.market_hash_name }}</div>
											<div class="csgo-item--st" v-if="item.data.market_hash_name.indexOf('StatTrak') !== -1">ST</div>
											<div class="csgo-item--wear" v-if="item.item_wear">{{ item.item_wear }}</div>
											<div class="csgo-item--price">${{ item.price }}</div>
											<div class="csgo-item--bg" :style="`background-image:url(https://steamcommunity-a.akamaihd.net/economy/image/${item.data.image});`"></div>
										</div>
									</div>
									<div v-else-if="userInventory.error">
										<div v-if="userInventory.error.statusCode == 403">
											<div class="alert alert-danger" style="margin:0">
												<strong>Your profile or inventory settings are set to private. We can't acquire the items of your CS:GO inventory.</strong>
												<div><a href="http://steamcommunity.com/id/me/edit/settings" target="_blank">Change your Steam privacy settings here.</a>													After that's done you can <a href="#">try reloading inventories</a>.</div>
											</div>
											<div class="alert alert-warning">
												<strong>If you're certain your privacy settings are public please contact the administrator or try again later.</strong>
												<div>Sometimes Steam has issues with its stability of the inventory servers. Make sure that Steam is not broken
													<a href="http://steamstat.us" target="_blank"><strong>here</strong></a>.</div>
											</div>
										</div>
										<div v-else>
											<div class="alert alert-danger">
												<strong v-if="userInventory.error.error">{{ userInventory.error.error }}</strong>
												<strong v-else>Something went wrong.. please try again!</strong>
												<span v-if="userInventory.error.statusCode">({{ userInventory.error.statusCode }})</span>
											</div>
										</div>
									</div>
									<div v-else-if=" ! user.steamID64">
										<div class="alert alert-info" style="margin-right:30px;">Please authenticate to join a coinflip.</div>
									</div>
									<div v-else>
										<div class="alert alert-info"><img src="img/load.gif" alt="">Please wait..</div>
									</div>
									<div class="clearfix"></div>
								</div>
							</div>
							<div class="col-xs-6">
								<div div class="well text-center inventorybutton">
									Selected items
								</div>
								<div class="csgo-items high">
									<div v-if=" ! userInventory.error && userInventorySelected.length > 0">
										<div class="csgo-item csgo-item--rare" :class="`csgo-item--${item.item_type.name}`" v-for="item in userInventory" v-if="userInventorySelected.indexOf(item.assetid) !== -1"
										 v-on:click="removeItem('user', item.assetid, item.price)">
											<div class="csgo-item--title">{{ item.data.market_hash_name }}</div>
											<div class="csgo-item--st" v-if="item.data.market_hash_name.indexOf('StatTrak') !== -1">ST</div>
											<div class="csgo-item--wear" v-if="item.item_wear">{{ item.item_wear }}</div>
											<div class="csgo-item--price">${{ item.price }}</div>
											<div class="csgo-item--bg" :style="`background-image:url(https://steamcommunity-a.akamaihd.net/economy/image/${item.data.image});`"></div>
										</div>
									</div>
									<div class="clearfix"></div>
								</div>
							</div>
							<div class="modal-footer">
								<span class="price">
								<span class="well well-sm">${{ userInventorySelectedValue.toFixed(2) }}</span>
								</span>
								<button type="button" class="btn btn-primary" style="background-color:rgb(85,85,85);margin-bottom:2px;height:38px;outline:none;" data-dismiss="modal"
								 v-on:click="cancelFlip">Cancel</button>
								<div v-if="flipIndexClicked != -1 && userInventorySelectedValue.toFixed(2) > (coinflips[flipIndexClicked].itemsAndDetails.value)-((coinflips[flipIndexClicked].itemsAndDetails.value)*site.flipMinimumPercentageMultiplier)">
									<button type="button" class="btn btn-primary" style="margin-bottom:2px;margin-left:-.3px;height:38px;outline:none;" v-on:click="joinFlip">Join</button>
								</div>
								<div v-else>
									<button type="button" class="btn btn-disabled" style="outline:none;">Join</button>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>


		<div class="modal fade" id="tradeLinkModal">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-body">
						<h3>Trade link</h3>
						<div class="alert alert-danger" v-if="invalidTradelink">
							<strong>Invalid tradelink!</strong>
						</div>
						<h4><a href="http://steamcommunity.com/id/me/tradeoffers/privacy#trade_offer_access_url" target="_blank">Where do I find this?</a></h4>
						<input type="text" class="form-control" v-model="user.tradelink">
						<hr style="opacity:0; margin: 7.5px 0;">
						<a class="btn btn-primary btn-lg updatebutton" v-on:click="updateTradelink">Update</a>
						<hr>
						<p>By adding your Steam Trade url you make it possible for our bots to send you a trade offer without the need to add
							you as a friend on steam.</p>
						<p>This is totally safe and no items can be traded before you have inspected and accepted the offer from your steam page.</p>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-primary" style="outline:none;" data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>
		
		<div class="modal fade" id="watchflipmodal">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header"><h4>Coinflip</h4>
					</div>
					<div class="modal-body">
						<div class="row">
							<div id="coin-flip-cont">
								<div id="coin">
									<div class="front"></div>
									<div class="back"></div>
								</div>
							</div>
						</div>
						<br>
						<div class="row">
							<div class="col-md-4"><p style="font-size:20px;margin-left:40px;">{{ user.displayName }}</p></div>
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-primary" style="outline:none;" data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>

		<div class="modal fade" id="howitworksmodal">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h4 class="modal-title">How it Works</h4>
					</div>
					<div class="modal-body">
						<h4>Our Method:</h4>
						<p>CsOptic uses the Double Blind provably fair system. That is, neither you nor the CsOptic server knows who will win the
							bet until the bet is over. This is usually just called Provably Fair, but many (almost all) CS:GO betting websites
							don't do this. They know who the winner is and can fix the bet before the bet is over with.</p>
						<p>The CsOptic site works by having both the server AND the user generate a sha256 encrypted hash. Because the determining
							numbers are generated by both the server and the user and then merged, neither the server or user can fix the bet.
						</p>
						<h4>Disclaimer:</h4>
						<p>By placing a bet on CsOptic.com, you are confirming that you are above 18 years of age and are fully responsible for
							your own actions. CsOptic.com is not responsible for any items lost due to negligence or irresponsible behavior. CsOptic.com
							reserves the right to suspend any bets placed on any user's account if deemed necessary by administration. With all
							of this said, we do our best to provide the most exciting and enjoyable platform available on the web. Thank you for
							choosing CsOptic.com.
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-primary" style="outline:none;" data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>

		<div class="modal fade" id="tradeoffer">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-body">
						<h3>Trade status</h3>
						<div class="alert alert-info" v-if=" ! offerStatus.error && offerStatus.status != 3">
							<strong v-if="offerStatus.status == 4"><img src="img/load.gif" alt=""> Validating requested trade..</strong>
							<strong v-if="offerStatus.status == 1"><img src="img/load.gif" alt=""> Preparing to send offer..</strong>
							<strong v-if="offerStatus.status == 2"><img src="img/load.gif" alt=""> Confirming sent offer..</strong>
						</div>
						<div v-else-if=" ! offerStatus.error && offerStatus.status == 3">
							<div class="alert alert-success">
								<strong>Requested trade has been sent successfully!
                                    <a :href="`http://steamcommunity.com/tradeoffer/${offerStatus.offer}`" target="_blank">Click here to open the trade offer.</a>
                                </strong>
							</div>
							<div class="alert alert-warning">This trade offer will expire in <strong>10 minutes</strong>.</div>
						</div>
						<div v-else>
							<strong v-if="offerStatus.error.code === 429">We are being rate-limited and could not send the offer. Please try again later.</strong>
							<strong v-else>{{ offerStatus.error }}</strong>
						</div>
						<div>
							<h4>Server hash <a href="/howitworks" target="_blank">(What's this?)</a></h4>
							<p>{{ serverHash }}</p>
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal" v-on:click="reset">Close</button>
					</div>
				</div>
			</div>
		</div>

	</div>

	<div class="footer">
		<div class="container">
			<span>
          		<a href='#'><i class="fa fa-facebook fa-3x fa-fw"></i></a>
          		<a href='https://twitter.com/cs_optic' target="_blank"><i class="fa fa-twitter fa-3x fa-fw"></i></a>
				<a href='#'><i class="fa fa-instagram fa-3x fa-fw" style="color:rgb(238, 66, 244);"></i></a>
          	</span>
		</div>
	</div>
	
	<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
	<script src="/socket.io/socket.io.js"></script>
	<script src="https://code.jquery.com/jquery-1.11.1.js"></script>
	<script src="js/tether.min.js"></script>
	<script src="js/jquery.mCustomScrollbar.concat.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/app.js"></script>
	<script src="js/Coinflip.js"></script>

</body>

</html>